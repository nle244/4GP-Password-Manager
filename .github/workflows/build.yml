name: Build application with Pyinstaller 

on: 
  push:
    branches: [ austin ]
  pull_request: 
    branches: [ austin ] 

jobs:
  build-windows: 
    runs-on: ubuntu-latest 
    strategy:
      matrix:
        python-version: [ 3.9 ]

    steps: 
    - uses: actions/checkout@v2 

    - name: Pack it up for Windows
      uses: JackMcKew/pyinstaller-action-windows@main 
      with:
        path: .

    - uses: actions/upload-artifact@v2
      with:
        name: QuickKey
        path: dist/windows

  build-linux: 
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [ 3.9 ]

    steps:
      - uses: actions/checkout@v2 

      - name: Get Python ${{ matrix.python-version }}
        uses: actions/setup-python@v2 
        with:
          python-version: ${{ matrix.python-version }} 
      - name: Get dependencies 
        run: |
          python -m pip install --upgrade pip 
          pip install -r requirements.txt
          pip install pyinstaller

      - name: Pack it up for Linux
        run: |
          python -m pyinstaller 

      - uses: actions/upload-artifact@v2 
        with: 
          name: QuickKey 
          path: dist/linux
